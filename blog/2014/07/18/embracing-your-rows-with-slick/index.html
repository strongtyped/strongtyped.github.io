
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Embracing Your Rows With Slick - Strong[Typed]</title>
  <meta name="author" content="StrongTyped.io">

  
  <meta name="description" content="Strong[Typed] consulting training company blog Embracing Your Rows With Slick written July 18, 2014 in Posted by Renato Cavalcanti This post is a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.strongtyped.io/blog/2014/07/18/embracing-your-rows-with-slick">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Strong[Typed]" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-50926236-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Exo:400,500,600,500italic,600italic" rel="stylesheet" type="text/css">

</head>

<!-- _layouts/base-post.html -->
  <body>

  	<div class="content">
    <!-- _layouts/post.html -->

<div class="navbar">
  <div class="navbar-fixed-top">
      <div class="container">
      <ul class="nav navbar-left">
        <li>
          <h2 class="strongtyped"><a href="/"><span class="strong">Strong<span><span class="typed">[Typed]</span></a></h2>
        </li>
      </ul>
      <ul class="nav secondary-nav navbar-nav navbar-right">


			
  		<li><a class="inactive" href="/consulting">consulting</a></li>	
  	

			
  		<li><a class="inactive" href="/training">training</a></li>	
  	

			
  		<li><a class="inactive" href="/company">company</a></li>	
  	

	
  		<li><a class="active" href="/blog">blog</a></li>	
  	

</ul>      
    </div>
  </div>
</div>


<article role="article" class="full-single-article">
  <div class="container">
    <div class="row">
      <div class="col-md-10 col-md-offset-1">
        <h1>Embracing Your Rows With Slick</h1>
        <!-- post/metadata.html --> 
<span class="meta">
  written 








  



<time datetime="2014-07-18T09:00:00+02:00" pubdate data-updated="true">July 18, 2014</time>  
in 


<br/>
  

<span class="byline author vcard">Posted by <span class="fn">Renato Cavalcanti</span></span>

</span>
<!-- end post/metadata.html --> 
        <p>This post is a follow-up of my talk &ldquo;<em>Slick in the field, learning to forget ORM</em>&rdquo; presented at ScalaDays 2014. The video is available on <a href="http://www.parleys.com/play/53a7d2c6e4b0543940d9e54c">Parleys</a> and can be watched on the bottom of this page.</p>

<p>At Scala Days I presented the project <a href="https://github.com/strongtyped/active-slick">ActiveSlick</a> which is a thin layer on top of Slick (v.20) providing some abstractions to ease object lifecycle management and the implementation of a type-safe <code>ActiveRecord</code> pattern.</p>

<p>Slick is wonderful piece of code that allows you to build and compose sql queries using plain Scala code. The advantages of that are many, but the most important, in my opinion, is the high re-utilisation of queries by composition and the compile time checking offered by the Scala compiler.</p>

<p>This post is NOT an introduction to Slick, neither was my talk at Scala Days. The goal is to explain how I&rsquo;ve solved part of the object lifecycle management and my vision about how one should model applications using Slick.</p>

<!-- more -->


<h1>Object lifecycle management</h1>

<p>It&rsquo;s very common nowadays to find articles blaming ORM frameworks and stating that ORM is an anti-pattern. I won&rsquo;t go into that discussion. I don&rsquo;t think that ORM frameworks offer a perfect solution, but much like everything in our industry, there is no perfect solutions. There is always some trade-offs to make when choosing one or other tool.</p>

<p>Martin Fowler once wrote an article called <a href="http://martinfowler.com/bliki/OrmHate.html">OrmHate</a> where he discuss this ORM blaming trend. The main argument against ORM is that it tries to workaround the inherent problem of connecting an object-oriented model to relational database tables. However, Martin&rsquo;s point of view is that ORM frameworks are not only trying to solve the impedance mismatch problem, they are also helping us to deal with two representations of our data. One representation being the in-memory model expressed in an object-oriented fashion and another representation stored in relational database tables.</p>

<p>These two representations of data must be kept in sync. This is a challenge that any application doing persistence needs to solve. As soon you serialise/deserialise data to and from any kind of storage you have to make sure you synchronise them correctly.</p>

<p>The most common problems related to the object lifecycle are <em>identity</em> and <em>versioning</em>. Once we have <em>identity</em> and <em>versioning</em> we can answer the following questions:</p>

<ul>
<li>Is this object already persisted?</li>
<li>Is this object dirty? Does it need to be saved back into storage?</li>
<li>Is this object stale?</li>
</ul>


<p>These are the typical lifecycle questions that we have for a single object. But this is not all. We also need to deal with collections of records. We must be able to preserve the ordering of elements and to know when an object was removed from a collection or added to it.</p>

<p>Contrary to other persistence libraries, Slick does not provide these facilities. To some extend this is expected as Slick is a database access library not a persistence framework. As stated in the Slick website, &ldquo;<em>Slick is a modern database query and access library for Scala</em>&rdquo;.</p>

<p>The question is how can we build a framework to solve the above mentioned problems on top of Slick? How can we build a framework that helps us to deal with single object and collection lifecycle using a type-safe database query and access library?</p>

<h1>Embrace your rows</h1>

<p>Another import point of my talk was around the question: &ldquo;<em>How to model your domain when using Slick?</em>&rdquo;.</p>

<p>A very common question on the Slick mailing list is how to model one-to-many and many-to-many relations with Slick? After years of object-oriented and ORM practice it&rsquo;s natural that we have to spent some time to learn how to think differently. By consequence, we&rsquo;ll also have to learn how to model differently.</p>

<p>My take on that is that we should code and model to our rows. When using Scala we often model using immutable data structures, i.e.: case classes.  Slick of course just builds on top of this paradigm. A case class model is a mirror of a table definition and an instance of such case class is just a row that was brought into memory or a row that still need to be inserted in a table.</p>

<p><strong>Embrace your rows</strong> is a call-out to adopt this way of modelling. We often say that functions are first-class citizens in functional programming. That failure is a first-class citizen in reactive programming. Well, when using Slick, rows are first-class citizens.</p>

<p>We could try to fight the ORM battle once again and build a ORM framework more suited to immutable data structures, with built-in nullable &lt;&ndash;> Option conversion, with type-safe queries and query composition. But we can also model differently by keeping our in-memory model as close as possible to its relational database representation. And that&rsquo;s exactly what Slick does.</p>

<p>Therefore the <a href="https://github.com/strongtyped/active-slick">ActiveSlick</a> project goal is to build a thin layer on top of Slick to solve some basic object lifecycle challenges and to promote the idea of modelling with rows, much like when using the <code>ActiveRecord</code> pattern. Hence the name <code>ActiveSlick</code>.</p>

<hr />

<h2>Parleys Video: Slick in the field, learning to forget ORM</h2>

<iframe type="text/html" width="100%" height="410" mozallowfullscreen="true" webkitallowfullscreen="true" src="http://www.parleys.com/share.html#play/53a7d2c6e4b0543940d9e54c" frameborder="0"></iframe>


      </div>
      <div class="col-md-10 col-md-offset-1">
        
        <section id="comment">
            <h1 class="title">Comments</h1>
            <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
        </section>
        
      </div>
    </div>
  </div>
</article>

<hr class="divider-short"/>



<div class="archive-link">
  <div class="container">
    <div class="row">
      <div class="col-md-10 col-md-offset-1">
        
          <a class="pull-left" href="/blog/2014/05/23/case-class-related-macros/" title="Previous Post: Macros: case class related macros">&laquo; Previous: Macros: case class related macros</a>
        

        
          <a class="pull-right" href="/blog/2014/10/23/javaone-university-2014/" title="Next Post: 2014 JavaOne University: Functional Programming in Scala">Next: 2014 JavaOne University: Functional Programming in Scala &raquo;</a>
        
      </div>
    </div>
  </div>
</div>

	</div>
    <footer role="contentinfo"><!-- file: _includes/footer.html -->
<footer id="footer" class="footer-row">
	<div class="row">
	  	<div class="col-md-10 col-md-offset-1">
			<div class="row">
				<div class="col-md-12">
						<dl>
        <dt><a href="/company">Recent posts</a></dt>
        
        <dd>
        	<a href="/blog/2014/10/23/javaone-university-2014/">2014 JavaOne University: Functional Programming in Scala</a>
        </dd>
		
        <dd>
        	<a href="/blog/2014/07/18/embracing-your-rows-with-slick/">Embracing Your Rows With Slick</a>
        </dd>
		
        <dd>
        	<a href="/blog/2014/05/23/case-class-related-macros/">Macros: Case Class Related Macros</a>
        </dd>
		
        <dd>
        	<a href="/blog/2014/05/20/reactive-programming-schedulers-workers/">Reactive Programming: Schedulers and Workers</a>
        </dd>
		
        <dd>
        	<a href="/blog/2014/05/14/reactive-programming-notification-observable/">Reactive Programming: Notification Versus Observable</a>
        </dd>
		
    </dl>
<!-- file: _includes/end_footer.html -->
<div class="pull-right">

</div>

				</div>
			</div>
		</div>
	</div>
</footer></footer>
    
<div class="row">
	<div class="col-md-10 col-md-offset-1">
		<div class="row  sitemap-footer">
			<div class="col-md-3">
				<dl>
			        <dt><a class="sitemap-link" href="/consulting">Consulting</a></dt>
			        <dd><a href="/consulting#mentoring">Mentoring</a></dd>
					<dd><a href="/consulting#devdep">Development</a></dd>
			    </dl>
			</div>
			<div class="col-md-3">
				<dl>
			        <dt><a href="/training">Training</a></dt>
			        <dd><a href="/training#seminars">Seminars</a></dd>
					<dd><a href="/training#workshops">Workshops</a></dd>
			    </dl>
			</div>
			<div class="col-md-3">
				<dl>
			        <dt><a href="/company">Company</a></dt>
					<dd><a href="/partners">Partners</a></dd>
					<dd><a href="/team">Team</a></dd>
					<dd><a href="mailto:info@strongtyped.io">Contact</a></dd>
			    </dl>
			</div>
			<div class="col-md-3">
				<dl>
					<dt>Social links</dt>
					<dd><a href="http://github.com/strongtyped">GitHub</a></dd>
					<dd><a href="http://twitter.com/strongtyped">Twitter</a></dd>
					<dd><a href="http://www.bescala.org">BeScala</a></dd>
				</dl>
			</div>
		</div>
	</div>
</div>      




<script type="text/javascript">
      var disqus_shortname = 'strongtyped';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.strongtyped.io/blog/2014/07/18/embracing-your-rows-with-slick/';
        var disqus_url = 'http://www.strongtyped.io/blog/2014/07/18/embracing-your-rows-with-slick/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




 

  </body>
</html>
